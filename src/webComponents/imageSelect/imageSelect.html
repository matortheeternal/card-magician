<style>
    :host {
        font-family: var(--sl-font-sans);
        color: var(--sl-input-label-color);
        padding-top: var(--sl-spacing-3x-small);
    }

    * {
        box-sizing: border-box;
    }

    sl-card {
        cursor: pointer;
        user-select: none;
        position: relative;
        text-align: center;
        transition: background-color 0.2s, border-color 0.2s;
    }

    sl-card::part(base) {
        background-color: var(--sl-input-background-color);
        box-shadow: var(--sl-shadow-x-small);
        border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    }

    sl-card.dragover {
        border: 2px dashed var(--sl-color-primary-600);
        background-color: var(--sl-color-primary-50);
    }

    .form-control {
        display: flex;
        flex-direction: column;
    }

    .form-control__label {
        margin-bottom: var(--sl-spacing-3x-small);
        font-size: var(--sl-input-font-size-small);
    }

    .form-control--small .form-control__label {
        font-size: var(--sl-input-label-font-size-small);
    }

    .upload-prompt {
        color: var(--sl-color-neutral-700);
    }

    .preview-container {
        position: relative;
        width: fit-content;
        height: fit-content;
        margin: auto;
        border-radius: var(--sl-border-radius-medium);
    }

    .crop-region {
        position: absolute;
        top: 0;
        left: 0;
        border: 4px dashed var(--sl-color-amber-500);
        width: 100%;
        height: 100%;
    }

    img.preview-image {
        display: block;
        max-width: 300px;
        max-height: 160px;
    }

    .preview-name {
        font-size: small;
    }

    .remove-btn {
        cursor: pointer;
        position: absolute;
        top: 0;
        right: 0;
    }

    .remove-btn::part(base) {
        padding: var(--sl-spacing-2x-small);
        color: var(--sl-color-danger-600);
    }
</style>

<div part="form-control" class="form-control">
    <label part="form-control-label" class="form-control__label">
        <slot name="label"></slot>
    </label>

    <sl-card class="dropzone" part="dropzone">
        <div class="upload-prompt" part="upload-prompt">
            <sl-icon name="image" style="font-size: 4em;"></sl-icon>
            <div>Select image</div>
        </div>

        <div class="preview" part="preview" style="display: none">
            <sl-tooltip content="Clear selection">
                <sl-icon-button class="remove-btn" name="x-lg" part="remove-btn"></sl-icon-button>
            </sl-tooltip>
            <div class="preview-container">
                <img class="preview-image" alt="Preview" hidden part="preview-image" />
                <div class="crop-region"></div>
            </div>
            <div class="preview-name" part="preview-name"></div>
        </div>

        <input type="file" class="file-input" hidden />
    </sl-card>
</div>
